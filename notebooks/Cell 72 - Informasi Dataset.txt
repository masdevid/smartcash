# Cell 72: Informasi Dataset (refactored)

import pickle
from IPython.display import display, HTML

# Import komponen UI
from smartcash.ui_components.data_components import create_dataset_info_ui

# Import handler
from smartcash.handlers.ui_handlers.data_handlers import (
    setup_dataset_info_handlers,
    get_dataset_info
)

# Pastikan objek global tersedia
try:
    with open('data_globals.pkl', 'rb') as f:
        globals_dict = pickle.load(f)
    
    data_manager = globals_dict['data_manager']
    logger = globals_dict['logger']
except Exception as e:
    print(f"‚ùå Error loading global objects: {str(e)}")
    print("üí° Jalankan Cell 7.1 terlebih dahulu untuk menginisialisasi dataset")

# Buat UI untuk informasi dataset
info_ui = create_dataset_info_ui()

# Setup handler untuk komponen UI
setup_dataset_info_handlers(info_ui, data_manager, logger)

# Tampilkan UI
display(info_ui['ui'])

# Tampilkan informasi dataset awal
with info_ui['info_output']:
    get_dataset_info(data_manager, logger)