{
  "data": {
    "pipeline_summary": {
      "total_duration": 2206.7207038402557,
      "phases_completed": 4,
      "total_phases": 6,
      "success": false,
      "phase_results": {
        "preparation": {
          "success": true,
          "config": {
            "device": {
              "device": "cpu",
              "mixed_precision": false,
              "memory_fraction": 0.7,
              "allow_tf32": false,
              "auto_detect": false
            },
            "data": {
              "num_workers": 0,
              "pin_memory": false,
              "persistent_workers": false,
              "prefetch_factor": 2,
              "drop_last": true,
              "batch_size": 1,
              "gradient_accumulation_steps": 8,
              "effective_batch_size": 8
            },
            "training": {
              "mixed_precision": false,
              "gradient_clip": 5.0,
              "weight_decay": 0.0005,
              "optimizer": "adamw",
              "scheduler": "cosine",
              "scheduler_config": {
                "type": "cosine",
                "eta_min": 1e-06,
                "warmup_epochs": 0
              },
              "early_stopping": {
                "enabled": true,
                "patience": 15,
                "metric": "val_map50",
                "mode": "max",
                "min_delta": 0.001
              },
              "compile_model": false,
              "memory_efficient": true,
              "training_mode": "single_phase",
              "data": {
                "num_workers": 0,
                "pin_memory": false
              },
              "loss": {
                "type": "uncertainty_multi_task"
              }
            },
            "model": {
              "backbone": "cspdarknet",
              "pretrained": false,
              "feature_optimization": {
                "enabled": true
              },
              "layer_mode": "multi",
              "detection_layers": [
                "layer_1",
                "layer_2",
                "layer_3"
              ],
              "multi_layer_heads": true,
              "num_classes": 7,
              "img_size": 640,
              "model_name": "smartcash_yolov5"
            },
            "training_phases": {
              "phase_1": {
                "description": "Train detection heads with frozen backbone",
                "epochs": 1,
                "freeze_backbone": true,
                "learning_rates": {
                  "backbone": 1e-05,
                  "head": 0.001
                },
                "warmup_epochs": 0
              },
              "phase_2": {
                "description": "Fine-tune entire model",
                "epochs": 1,
                "freeze_backbone": false,
                "learning_rates": {
                  "backbone": 1e-05,
                  "head": 0.0001
                },
                "warmup_epochs": 0
              }
            },
            "platform_info": {
              "system": "Darwin",
              "machine": "arm64",
              "python": "3.12.9",
              "torch_version": "2.7.1",
              "cuda_available": false,
              "mps_available": true,
              "cpu_count": 10,
              "is_colab": false,
              "is_m1_mac": true,
              "is_cuda_workstation": false,
              "platform_name": "apple_silicon_mac",
              "force_cpu": true
            },
            "paths": {
              "checkpoints": "/Users/masdevid/Projects/smartcash/data/checkpoints",
              "visualization": "data/visualization",
              "logs": "data/logs"
            },
            "loss": {
              "type": "uncertainty_multi_task"
            },
            "memory_optimization": {
              "mixed_precision": false,
              "compile_model": false,
              "memory_efficient": true,
              "num_workers": 0,
              "device": "device(type='cpu')"
            },
            "model_name": "smartcash_yolov5"
          },
          "checkpoint_dir": "/Users/masdevid/Projects/smartcash/data/checkpoints",
          "platform_info": {
            "system": "Darwin",
            "machine": "arm64",
            "python": "3.12.9",
            "torch_version": "2.7.1",
            "cuda_available": false,
            "mps_available": true,
            "cpu_count": 10,
            "is_colab": false,
            "is_m1_mac": true,
            "is_cuda_workstation": false,
            "platform_name": "apple_silicon_mac",
            "force_cpu": true
          },
          "duration": 0.03455328941345215
        },
        "build_model": {
          "success": true,
          "model_info": {
            "status": "built",
            "model_name": "smartcash_yolov5",
            "backbone": "cspdarknet",
            "layer_mode": "multi",
            "detection_layers": [
              "layer_1",
              "layer_2",
              "layer_3"
            ],
            "num_classes": 7,
            "img_size": 640,
            "total_parameters": 57502688,
            "trainable_parameters": 57502688,
            "device": "cpu",
            "feature_optimization": true,
            "memory_usage": "N/A",
            "memory_optimization": {
              "enabled": true,
              "platform": "cpu",
              "batch_config": {
                "batch_size": 1,
                "gradient_accumulation_steps": 8,
                "effective_batch_size": 8,
                "num_workers": 0,
                "pin_memory": false,
                "persistent_workers": false,
                "prefetch_factor": 2,
                "drop_last": true
              },
              "memory_efficient_settings": {
                "mixed_precision": false,
                "compile_model": false,
                "memory_efficient": true,
                "num_workers": 0,
                "device": "device(type='cpu')"
              }
            }
          },
          "device": "cpu",
          "total_parameters": 57502688,
          "trainable_parameters": 57502688,
          "duration": 1.5378217697143555
        },
        "validate_model": {
          "success": true,
          "train_batches": 177,
          "val_batches": 22,
          "model_device": "cpu",
          "forward_pass_successful": true,
          "duration": 19.19170093536377
        },
        "training_phase_single": {
          "success": true,
          "epochs_completed": 1,
          "best_metrics": {
            "train_loss": 0.0,
            "val_loss": 0.0,
            "val_map50": 0.0,
            "val_map50_95": 0.0,
            "val_ap_Rp1K": 0.0,
            "val_ap_Rp2K": 0.0,
            "val_ap_Rp5K": 0.0,
            "val_ap_Rp10K": 0.0,
            "val_ap_Rp20K": 0.0,
            "val_ap_Rp50K": 0.0,
            "val_ap_Rp100K": 0.0,
            "layer_1_accuracy": 0.0,
            "layer_1_precision": 0.0,
            "layer_1_recall": 0.0,
            "layer_1_f1": 0.0,
            "layer_2_accuracy": 0.0,
            "layer_2_precision": 0.0,
            "layer_2_recall": 0.0,
            "layer_2_f1": 0.0,
            "layer_3_accuracy": 0.0,
            "layer_3_precision": 0.0,
            "layer_3_recall": 0.0,
            "layer_3_f1": 0.0,
            "val_layer_1_accuracy": 0.0,
            "val_layer_1_precision": 0.0,
            "val_layer_1_recall": 0.0,
            "val_layer_1_f1": 0.0,
            "val_layer_2_accuracy": 0.0,
            "val_layer_2_precision": 0.0,
            "val_layer_2_recall": 0.0,
            "val_layer_2_f1": 0.0,
            "val_layer_3_accuracy": 0.0,
            "val_layer_3_precision": 0.0,
            "val_layer_3_recall": 0.0,
            "val_layer_3_f1": 0.0
          },
          "best_checkpoint": "data/checkpoints/best_cspdarknet_single_phase_multi_unfrozen_20250727.pt",
          "final_metrics": {
            "train_loss": 0.0,
            "val_loss": 0.0,
            "val_map50": 0.0,
            "val_map50_95": 0.0,
            "val_ap_Rp1K": 0.0,
            "val_ap_Rp2K": 0.0,
            "val_ap_Rp5K": 0.0,
            "val_ap_Rp10K": 0.0,
            "val_ap_Rp20K": 0.0,
            "val_ap_Rp50K": 0.0,
            "val_ap_Rp100K": 0.0,
            "layer_1_accuracy": 0.0,
            "layer_1_precision": 0.0,
            "layer_1_recall": 0.0,
            "layer_1_f1": 0.0,
            "layer_2_accuracy": 0.0,
            "layer_2_precision": 0.0,
            "layer_2_recall": 0.0,
            "layer_2_f1": 0.0,
            "layer_3_accuracy": 0.0,
            "layer_3_precision": 0.0,
            "layer_3_recall": 0.0,
            "layer_3_f1": 0.0,
            "val_layer_1_accuracy": 0.0,
            "val_layer_1_precision": 0.0,
            "val_layer_1_recall": 0.0,
            "val_layer_1_f1": 0.0,
            "val_layer_2_accuracy": 0.0,
            "val_layer_2_precision": 0.0,
            "val_layer_2_recall": 0.0,
            "val_layer_2_f1": 0.0,
            "val_layer_3_accuracy": 0.0,
            "val_layer_3_precision": 0.0,
            "val_layer_3_recall": 0.0,
            "val_layer_3_f1": 0.0
          },
          "training_completed_successfully": true,
          "duration": 2185.524962902069
        },
        "summary_visualization": {
          "success": false,
          "error": "Summary & visualization failed: 'int' object has no attribute 'keys'",
          "duration": 0.02970576286315918
        }
      },
      "phases": [
        "preparation",
        "build_model",
        "validate_model",
        "training_phase_1",
        "training_phase_2",
        "summary_visualrization"
      ]
    },
    "final_training_result": {
      "success": true,
      "epochs_completed": 1,
      "best_metrics": {
        "train_loss": 0.0,
        "val_loss": 0.0,
        "val_map50": 0.0,
        "val_map50_95": 0.0,
        "val_ap_Rp1K": 0.0,
        "val_ap_Rp2K": 0.0,
        "val_ap_Rp5K": 0.0,
        "val_ap_Rp10K": 0.0,
        "val_ap_Rp20K": 0.0,
        "val_ap_Rp50K": 0.0,
        "val_ap_Rp100K": 0.0,
        "layer_1_accuracy": 0.0,
        "layer_1_precision": 0.0,
        "layer_1_recall": 0.0,
        "layer_1_f1": 0.0,
        "layer_2_accuracy": 0.0,
        "layer_2_precision": 0.0,
        "layer_2_recall": 0.0,
        "layer_2_f1": 0.0,
        "layer_3_accuracy": 0.0,
        "layer_3_precision": 0.0,
        "layer_3_recall": 0.0,
        "layer_3_f1": 0.0,
        "val_layer_1_accuracy": 0.0,
        "val_layer_1_precision": 0.0,
        "val_layer_1_recall": 0.0,
        "val_layer_1_f1": 0.0,
        "val_layer_2_accuracy": 0.0,
        "val_layer_2_precision": 0.0,
        "val_layer_2_recall": 0.0,
        "val_layer_2_f1": 0.0,
        "val_layer_3_accuracy": 0.0,
        "val_layer_3_precision": 0.0,
        "val_layer_3_recall": 0.0,
        "val_layer_3_f1": 0.0
      },
      "best_checkpoint": "data/checkpoints/best_cspdarknet_single_phase_multi_unfrozen_20250727.pt",
      "final_metrics": {
        "train_loss": 0.0,
        "val_loss": 0.0,
        "val_map50": 0.0,
        "val_map50_95": 0.0,
        "val_ap_Rp1K": 0.0,
        "val_ap_Rp2K": 0.0,
        "val_ap_Rp5K": 0.0,
        "val_ap_Rp10K": 0.0,
        "val_ap_Rp20K": 0.0,
        "val_ap_Rp50K": 0.0,
        "val_ap_Rp100K": 0.0,
        "layer_1_accuracy": 0.0,
        "layer_1_precision": 0.0,
        "layer_1_recall": 0.0,
        "layer_1_f1": 0.0,
        "layer_2_accuracy": 0.0,
        "layer_2_precision": 0.0,
        "layer_2_recall": 0.0,
        "layer_2_f1": 0.0,
        "layer_3_accuracy": 0.0,
        "layer_3_precision": 0.0,
        "layer_3_recall": 0.0,
        "layer_3_f1": 0.0,
        "val_layer_1_accuracy": 0.0,
        "val_layer_1_precision": 0.0,
        "val_layer_1_recall": 0.0,
        "val_layer_1_f1": 0.0,
        "val_layer_2_accuracy": 0.0,
        "val_layer_2_precision": 0.0,
        "val_layer_2_recall": 0.0,
        "val_layer_2_f1": 0.0,
        "val_layer_3_accuracy": 0.0,
        "val_layer_3_precision": 0.0,
        "val_layer_3_recall": 0.0,
        "val_layer_3_f1": 0.0
      },
      "training_completed_successfully": true,
      "duration": 2185.524962902069
    },
    "visualization_result": {
      "success": false,
      "error": "Summary & visualization failed: 'int' object has no attribute 'keys'",
      "duration": 0.02970576286315918
    },
    "markdown_summary": "# SmartCash Training Summary\n\n## Configuration\n- **Backbone**: cspdarknet\n- **Training Phases**: 2\n- **Loss Type**: uncertainty_multi_task\n- **Batch Size**: Auto\n- **Learning Rate**: N/A\n- **Early Stopping**: Enabled\n  - Patience: 15 epochs\n  - Metric: val_map50\n  - Mode: max\n\n## Session Information\n- **Session ID**: `54fe1996`\n- **Total Duration**: 2206.7 seconds\n"
  }
}